/*! asg.js 2016-01-04 */
!function(a){var b="asg",c=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=!1,z=a.extend({namespace:"asg",classes:[],callback:function(){},source:null,delay:300,minChars:1,offsetTop:7,putAbove:!1,putLeft:!1,numToSuggest:10,leadingWildcard:!1,staticPos:!1,footer:null,boldMatches:!1,clickEvent:"click",delimiter:"",keysInInput:!1},c),A=z.namespace,B=z.container,C={keyup:[],change:[]},D={};return l=function(){return d=b,a.isArray(z.source)&&(z.source=r(z.source)),z.putAbove&&z.classes.push("above"),z.putLeft&&z.classes.push("left"),m(),q(),D},r=function(a){var b,c;if(!a.length)return a;if("string"==typeof a[0])for(b=0;b<a.length;b++)a[b]={key:a[b],value:a[b]};else if(!a[0].key||!a[0].value)for(b=0;b<a.length;b++)c=a[b].key||a[b].value,a[b].key=a[b].value=c;return a},m=function(){var b=z.classes.join(" ");if(e=a('<div class="'+A+"-suggestions "+b+'"><ul class="'+A+'-ul"></ul></div>'),z.noHide||e.hide(),z.footer){var c=z.footer;c=c.jquery?c:a(c),e.append(c)}e.appendTo(B||a("body")),f=e.find("."+A+"-ul")},n=function(){z.callback()},s=function(){if(!z.staticPos){var b={},c=d.offset();b.top=z.putAbove?c.top-(11+z.offsetTop+e.height()):z.fixed?c.top-a(window).scrollTop()+20+z.offsetTop:c.top+20+z.offsetTop,b.left=z.putLeft?c.left+5+d.width()-e.width():c.left,e.css(b)}},o=function(b,c){if(f.empty(),y=!1,b&&b.length){var d,g,h,i=a("<ul/>"),j=z.numToSuggest||1e3,k=new RegExp("("+c+")","i");for(d=0;d<b.length&&j>d;d++)g=b[d],h=g.verbatim?"&#8220;"+g.value+"&#8221;":g.value,z.boldMatches&&(h=h.replace(k,'<span class="'+A+'-matched">$1</span>')),a('<li class="'+A+'-li"><span class="'+A+"-img-wrap "+(g.img?"":A+"-no-img")+'">'+(g.img?'<img class="'+A+'-img" src="'+g.img+'">':"")+'</span><span class="'+A+'-label" tabindex="-1">'+h+"</span></li>").data(A+"-data",g)[z.putAbove?"prependTo":"appendTo"](i).find("."+A+"-img").load(s);f.append(i.children()),s(),y=!0}z.noHide||e[y?"show":"hide"]()},p=function(){var b,c,e=z.source,f=[],g=v(d.val(),d[0].selectionStart),h=function(a){c<p.latest||j||(i&&(a||[]).length?(D.set(0,0,a[0]),n()):o(r(a),v(d.val(),d[0].selectionStart)))},k=new RegExp((z.leadingWildcard?"":"^")+g,"i");if(j=0,g||!z.minChars)if(e)if(a.isArray(e)){for(b=0;b<e.length;b++)e[b].value.match(k)&&f.push(e[b]);o(f)}else a.isFunction(e)&&(c=++p.latest,e(null,g,h));else D.set(g,g),n()},p.latest=0,x=function(a,b){for(var c=b,d=b;c>0&&a[c-1]!==z.delimiter;)c--;for(;d<a.length&&a[d]!==z.delimiter;)d++;return[c,d]},v=function(a,b){if(!z.delimiter)return a;var c=x(a,b);return a.substr(c[0],c[1]-c[0])},w=function(a){if(!z.delimiter)return void d.val(a);var b=d.val(),c=x(b,d[0].selectionStart);b=b.substr(0,c[0])+a+b.substr(c[1]),d.val(b)},q=function(){d.on("change."+A,function(a){for(var b=0,c=C.change.length;c>b;b++)C.change[b].call(d,a);d.val()?z.source||(j&&(j=clearTimeout(j)),j=setTimeout(p,z.delay)):n()}).on("keydown."+A,u).on("keyup."+A,t).on("click."+A,t).on("blur."+A,function(){z.noHide||(k=setTimeout(o,300))}).on("focus."+A,function(){i=0,z.noHide||(k&&(k=clearTimeout(k)),D.get()||!d.val()&&z.minChars||p())}),e.on(z.clickEvent,"li",function(){D.set(0,0,a(this).data(A+"-data")),n()})},t=function(a){a=a||window.event;for(var b=0,c=C.keyup.length;c>b;b++)C.keyup[b].call(d,a);var f,k=j,l=d.val(),m=v(l,d[0].selectionStart);if(i=0,l!==g||m!==h||13===a.which){if(D.set(),g=l,h=m,!l&&z.minChars)return void o();j&&(j=clearTimeout(j)),13===a.which?(a.preventDefault&&a.preventDefault(),f=e.find("li.sel"),k||f.length||(f=e.find("."+A+"-li:"+(z.putAbove?"last":"first")+"-child")),!k&&f.length?(D.set(0,0,f.data(A+"-data")),n()):(i=1,j=setTimeout(p,z.delay)),o()):d.val().length>=z.minChars?j=setTimeout(p,z.delay):o()}},u=function(a){if(a=a||window.event,!y)return!0;var b=e.find("li.sel");switch(b.length||(b=e.find("li:hover")),a.which){case 38:b.removeClass("sel"),a.preventDefault&&a.preventDefault(),b.length&&b.prev().length?b.prev().addClass("sel"):e.find("ul li:last-child").addClass("sel");break;case 40:b.removeClass("sel"),a.preventDefault&&a.preventDefault(),b.length&&b.next().length?b.next().addClass("sel"):e.find("ul li:first-child").addClass("sel");break;case 27:case 9:o()}},D.get=function(){var a=d.data(A+"-data");return a&&a.key&&a.value?a:void 0},D.set=function(b,c,e,f){e=e||{key:b,value:c};var g,h=z.source;if(e.value&&e.key)d.data(A+"-data",e),w(z.keysInInput?e.key:e.value),(f||a.noop)();else if(e.key)if(e.value=e.key,d.val("...").data(A+"-data",e),a.isArray(h)){var i=!1;for(g=0;g<h.length;g++)if(h[g].key===e.key){D.set(h[g].key,h[g].value),i=!0;break}i?(f||a.noop)():D.clear()}else h(e.key,null,function(b){1===b.length?(b=r(b),D.set(0,0,b[0]),(f||a.noop)()):D.clear()});else d.data(A+"-data",null)},D.clear=function(){d.val("").data(A+"-data",null)},D.destroy=function(){e.remove(),d.data(A+"-data",null).off("."+A)},D.on=function(a,b){C[a].push(b)},D.fixed=function(){e.addClass("asg-fixed"),z.fixed=!0},D.suggest=p,l(b)};a.fn[b]=a.fn[b.toUpperCase()]=function(d){var e=this.data(b);return d&&"object"!=typeof d?e?e[d].apply(e,Array.prototype.slice.call(arguments,1)):void a.error('Cannot call "'+d+'" - Autosuggest not initialized.'):e||this.data(b,c(this,d))}}((window.FTB||{}).$||window.jQuery);